{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../favourites.service\";\nimport * as i2 from \"../tech-data.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../rates.service\";\nimport * as i5 from \"@angular/common\";\nfunction SongComponent_tr_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function SongComponent_tr_14_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const song_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.addToCart(song_r1));\n    });\n    i0.ɵɵtext(7, \"Add to favourites\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\")(9, \"button\", 4);\n    i0.ɵɵtext(10, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 5);\n    i0.ɵɵelementStart(12, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function SongComponent_tr_14_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const song_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.upRate(song_r1, ctx_r4.currentRate));\n    });\n    i0.ɵɵtext(13, \"+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function SongComponent_tr_14_Template_button_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const song_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.rateSong(song_r1, ctx_r5.currentRate));\n    });\n    i0.ɵɵtext(15, \"Rate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const song_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(song_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(song_r1.duration);\n    i0.ɵɵadvance(7);\n    i0.ɵɵpropertyInterpolate(\"value\", song_r1.rate);\n  }\n}\nexport class SongComponent {\n  constructor(favourites, dataService, router, rate) {\n    this.favourites = favourites;\n    this.dataService = dataService;\n    this.router = router;\n    this.rate = rate;\n    this.url = this.router.url;\n    this.currentRate = 0;\n    this.songs = [];\n    this.ratedSongsList = [];\n    this.rateList = [];\n  }\n  ngOnInit() {\n    if (this.url == '/home') {\n      this.getRandom();\n    } else {\n      this.getAll();\n    }\n  }\n  addToCart(song) {\n    this.favourites.addFavouriteSong(song);\n  }\n  getAll() {\n    this.dataService.getAllSongs().subscribe(songs => this.songs = songs);\n  }\n  getRandom() {\n    this.dataService.getRandomSongs().subscribe(songs => this.songs = songs);\n  }\n  rateSong(song, currentRate) {\n    console.log(currentRate);\n    if (!this.ratedSongsList.find(v1 => v1.name == song.name)) {\n      this.ratedSongsList.push({\n        ...song\n      });\n      this.rateList.push(currentRate);\n    }\n  }\n  upRate(song, curentRate) {\n    song.rate++;\n  }\n  static #_ = this.ɵfac = function SongComponent_Factory(t) {\n    return new (t || SongComponent)(i0.ɵɵdirectiveInject(i1.FavouritesService), i0.ɵɵdirectiveInject(i2.TechDataService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.RatesService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SongComponent,\n    selectors: [[\"app-song\"]],\n    decls: 15,\n    vars: 1,\n    consts: [[1, \"table\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\", 3, \"click\"], [1, \"btn\"], [\"type\", \"number\", 3, \"value\"], [1, \"btn\", 3, \"click\"], [1, \"btn\", \"btn-success\", 3, \"click\"]],\n    template: function SongComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h3\");\n        i0.ɵɵtext(1, \"Some songs for you\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"table\", 0)(3, \"thead\")(4, \"tr\")(5, \"th\", 1);\n        i0.ɵɵtext(6, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"th\", 1);\n        i0.ɵɵtext(8, \"Duration\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"th\", 1);\n        i0.ɵɵtext(10, \"Add\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"th\", 1);\n        i0.ɵɵtext(12, \"Rate\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"tbody\");\n        i0.ɵɵtemplate(14, SongComponent_tr_14_Template, 16, 3, \"tr\", 2);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngForOf\", ctx.songs);\n      }\n    },\n    dependencies: [i5.NgForOf],\n    styles: [\"@charset \\\"UTF-8\\\";\\n*[_ngcontent-%COMP%] {\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.rate[_ngcontent-%COMP%] {\\n  float: left;\\n  height: 46px;\\n  padding: 0 10px;\\n}\\n\\n.rate[_ngcontent-%COMP%]:not(:checked)    > input[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: -9999px;\\n}\\n\\n.rate[_ngcontent-%COMP%]:not(:checked)    > label[_ngcontent-%COMP%] {\\n  float: right;\\n  width: 1em;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  cursor: pointer;\\n  font-size: 30px;\\n  color: #ccc;\\n}\\n\\n.rate[_ngcontent-%COMP%]:not(:checked)    > label[_ngcontent-%COMP%]:before {\\n  content: \\\"\\u2605 \\\";\\n}\\n\\n.rate[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%]:checked    ~ label[_ngcontent-%COMP%] {\\n  color: #ffc700;\\n}\\n\\n.rate[_ngcontent-%COMP%]:not(:checked)    > label[_ngcontent-%COMP%]:hover, .rate[_ngcontent-%COMP%]:not(:checked)    > label[_ngcontent-%COMP%]:hover    ~ label[_ngcontent-%COMP%] {\\n  color: #deb217;\\n}\\n\\n.rate[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%]:checked    + label[_ngcontent-%COMP%]:hover, .rate[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%]:checked    + label[_ngcontent-%COMP%]:hover    ~ label[_ngcontent-%COMP%], .rate[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%]:checked    ~ label[_ngcontent-%COMP%]:hover, .rate[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%]:checked    ~ label[_ngcontent-%COMP%]:hover    ~ label[_ngcontent-%COMP%], .rate[_ngcontent-%COMP%]    > label[_ngcontent-%COMP%]:hover    ~ input[_ngcontent-%COMP%]:checked    ~ label[_ngcontent-%COMP%] {\\n  color: #c59b08;\\n}\\n/*# sourceURL=webpack://./src/app/song/song.component.scss */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvc29uZy9zb25nLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdCQUFnQjtBQUFoQjtFQUNJLFNBQUE7RUFDQSxVQUFBO0FBRUo7O0FBQUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7QUFHSjs7QUFEQTtFQUNJLGtCQUFBO0VBQ0EsWUFBQTtBQUlKOztBQUZBO0VBQ0ksWUFBQTtFQUNBLFVBQUE7RUFDQSxnQkFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7RUFDQSxXQUFBO0FBS0o7O0FBSEE7RUFDSSxhQUFBO0FBTUo7O0FBSkE7RUFDSSxjQUFBO0FBT0o7O0FBTEE7O0VBRUksY0FBQTtBQVFKOztBQU5BOzs7OztFQUtJLGNBQUE7QUFTSjs7QUFOQSwyRUFBQSIsInNvdXJjZXNDb250ZW50IjpbIkBjaGFyc2V0IFwiVVRGLThcIjtcbioge1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG59XG5cbi5yYXRlIHtcbiAgZmxvYXQ6IGxlZnQ7XG4gIGhlaWdodDogNDZweDtcbiAgcGFkZGluZzogMCAxMHB4O1xufVxuXG4ucmF0ZTpub3QoOmNoZWNrZWQpID4gaW5wdXQge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogLTk5OTlweDtcbn1cblxuLnJhdGU6bm90KDpjaGVja2VkKSA+IGxhYmVsIHtcbiAgZmxvYXQ6IHJpZ2h0O1xuICB3aWR0aDogMWVtO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGZvbnQtc2l6ZTogMzBweDtcbiAgY29sb3I6ICNjY2M7XG59XG5cbi5yYXRlOm5vdCg6Y2hlY2tlZCkgPiBsYWJlbDpiZWZvcmUge1xuICBjb250ZW50OiBcIsOiwpjChSBcIjtcbn1cblxuLnJhdGUgPiBpbnB1dDpjaGVja2VkIH4gbGFiZWwge1xuICBjb2xvcjogI2ZmYzcwMDtcbn1cblxuLnJhdGU6bm90KDpjaGVja2VkKSA+IGxhYmVsOmhvdmVyLFxuLnJhdGU6bm90KDpjaGVja2VkKSA+IGxhYmVsOmhvdmVyIH4gbGFiZWwge1xuICBjb2xvcjogI2RlYjIxNztcbn1cblxuLnJhdGUgPiBpbnB1dDpjaGVja2VkICsgbGFiZWw6aG92ZXIsXG4ucmF0ZSA+IGlucHV0OmNoZWNrZWQgKyBsYWJlbDpob3ZlciB+IGxhYmVsLFxuLnJhdGUgPiBpbnB1dDpjaGVja2VkIH4gbGFiZWw6aG92ZXIsXG4ucmF0ZSA+IGlucHV0OmNoZWNrZWQgfiBsYWJlbDpob3ZlciB+IGxhYmVsLFxuLnJhdGUgPiBsYWJlbDpob3ZlciB+IGlucHV0OmNoZWNrZWQgfiBsYWJlbCB7XG4gIGNvbG9yOiAjYzU5YjA4O1xufVxuXG4vKiBNb2RpZmllZCBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vbXVrdWxrYW50L1N0YXItcmF0aW5nLXVzaW5nLXB1cmUtY3NzICovIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":";;;;;;;;;IAWMA,0BAA+B;IACzBA,YAAa;IAAAA,iBAAK;IACtBA,0BAAI;IAAAA,YAAiB;IAAAA,iBAAK;IAC1BA,0BAAI;IAAQA;MAAA;MAAA;MAAA;MAAA,OAASA,wCAAe;IAAA,EAAC;IAAuCA,iCAAiB;IAAAA,iBAAS;IACtGA,0BAAI;IACkBA,kBAAC;IAAAA,iBAAS;IAC9BA,4BAA2C;IAC3CA,kCAAwD;IAApCA;MAAA;MAAA;MAAA;MAAA,OAASA,yDAAyB;IAAA,EAAC;IAACA,kBAAC;IAAAA,iBAAS;IAClEA,kCAAsE;IAAtCA;MAAA;MAAA;MAAA;MAAA,OAASA,2DAA2B;IAAA,EAAC;IAACA,qBAAI;IAAAA,iBAAS;;;;IAPjFA,eAAa;IAAbA,kCAAa;IACbA,eAAiB;IAAjBA,sCAAiB;IAIEA,eAAqB;IAArBA,+CAAqB;;;ACHpD,OAAM,MAAOC,aAAa;EAKxBC,YAAoBC,UAA6B,EAAUC,WAA4B,EAAUC,MAAc,EAAUC,IAAkB;IAAvH,eAAU,GAAVH,UAAU;IAA6B,gBAAW,GAAXC,WAAW;IAA2B,WAAM,GAANC,MAAM;IAAkB,SAAI,GAAJC,IAAI;IAH7H,QAAG,GAAG,IAAI,CAACD,MAAM,CAACE,GAAG;IACrB,gBAAW,GAAG,CAAC;IAef,UAAK,GAAW,EAAE;IAElB,mBAAc,GAAW,EAAE;IAC3B,aAAQ,GAAa,EAAE;EAfvB;EAEAC,QAAQ;IACN,IAAI,IAAI,CAACD,GAAG,IAAI,OAAO,EAAE;MACvB,IAAI,CAACE,SAAS,EAAE;KACjB,MACI;MACH,IAAI,CAACC,MAAM,EAAE;;EAGjB;EAQAC,SAAS,CAACC,IAAU;IAClB,IAAI,CAACT,UAAU,CAACU,gBAAgB,CAACD,IAAI,CAAC;EACxC;EAEAF,MAAM;IACJ,IAAI,CAACN,WAAW,CAACU,WAAW,EAAE,CAACC,SAAS,CAACC,KAAK,IAAI,IAAI,CAACA,KAAK,GAAGA,KAAK,CAAC;EACvE;EAEAP,SAAS;IACP,IAAI,CAACL,WAAW,CAACa,cAAc,EAAE,CAACF,SAAS,CAACC,KAAK,IAAI,IAAI,CAACA,KAAK,GAAGA,KAAK,CAAC;EAC1E;EAEAE,QAAQ,CAACN,IAAU,EAAEO,WAAmB;IACtCC,OAAO,CAACC,GAAG,CAACF,WAAW,CAAC;IACxB,IAAG,CAAC,IAAI,CAACG,cAAc,CAACC,IAAI,CAAEC,EAAE,IAAKA,EAAE,CAACC,IAAI,IAAIb,IAAI,CAACa,IAAI,CAAC,EAAC;MACzD,IAAI,CAACH,cAAc,CAACI,IAAI,CAAC;QAAC,GAAId;MAAI,CAAC,CAAC;MACpC,IAAI,CAACe,QAAQ,CAACD,IAAI,CAACP,WAAW,CAAC;;EAEnC;EAEAS,MAAM,CAAChB,IAAU,EAAEiB,UAAkB;IACnCjB,IAAI,CAACN,IAAI,EAAG;EACd;EAAC;qBA9CUL,aAAa;EAAA;EAAA;UAAbA,aAAa;IAAA6B;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QDd1BlC,0BAAI;QAAAA,kCAAkB;QAAAA,iBAAK;QAC3BA,gCAAqB;QAGGA,oBAAI;QAAAA,iBAAK;QACzBA,6BAAgB;QAAAA,wBAAQ;QAAAA,iBAAK;QAC7BA,6BAAgB;QAAAA,oBAAG;QAAAA,iBAAK;QACxBA,8BAAgB;QAAAA,qBAAI;QAAAA,iBAAK;QAG7BA,8BAAO;QACLA,+DAUK;QACPA,iBAAQ;;;QAXeA,gBAAQ;QAARA,mCAAQ","names":["i0","SongComponent","constructor","favourites","dataService","router","rate","url","ngOnInit","getRandom","getAll","addToCart","song","addFavouriteSong","getAllSongs","subscribe","songs","getRandomSongs","rateSong","currentRate","console","log","ratedSongsList","find","v1","name","push","rateList","upRate","curentRate","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\gasto\\OneDrive\\Documents\\Gaston\\Portfolio\\Spotify\\Proyect\\techshop\\src\\app\\song\\song.component.html","C:\\Users\\gasto\\OneDrive\\Documents\\Gaston\\Portfolio\\Spotify\\Proyect\\techshop\\src\\app\\song\\song.component.ts"],"sourcesContent":["<h3>Some songs for you</h3>\n<table class=\"table\">\n    <thead>\n      <tr>\n        <th scope=\"col\">Name</th>\n        <th scope=\"col\">Duration</th>\n        <th scope=\"col\">Add</th>\n        <th scope=\"col\">Rate</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr *ngFor=\"let song of songs\">\n        <td>{{song.name}}</td>\n        <td>{{song.duration}}</td>\n        <td><button (click)=\"addToCart(song)\" type=\"button\" class=\"btn btn-warning\">Add to favourites</button></td>\n        <td>\n          <button class=\"btn\">-</button>\n          <input type=\"number\" value=\"{{song.rate}}\">\n          <button class=\"btn\" (click)=\"upRate(song, currentRate)\">+</button>\n          <button class=\"btn btn-success\" (click)=\"rateSong(song, currentRate)\">Rate</button>\n        </td>\n      </tr>\n    </tbody>\n  </table>","import { NumberFormatStyle } from '@angular/common';\nimport { Component, Inject, OnInit } from '@angular/core';\nimport { FavouritesService } from '../favourites.service';\nimport { TechDataService } from '../tech-data.service';\nimport { RatesService } from '../rates.service';\nimport { Song } from './Song';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-song',\n  templateUrl: './song.component.html',\n  styleUrls: ['./song.component.scss']\n})\n\nexport class SongComponent implements OnInit {\n\n  url = this.router.url;\n  currentRate = 0;\n\n  constructor(private favourites: FavouritesService, private dataService: TechDataService, private router: Router, private rate: RatesService) {\n  }\n\n  ngOnInit(): void {\n    if (this.url == '/home') {\n      this.getRandom();\n    }\n    else {\n      this.getAll();\n    }\n    \n  }\n\n  songs: Song[] = [];\n\n  ratedSongsList: Song[] = [];\n  rateList: number[] = [];\n\n\n  addToCart(song: Song): void {\n    this.favourites.addFavouriteSong(song);\n  }\n\n  getAll() {\n    this.dataService.getAllSongs().subscribe(songs => this.songs = songs);\n  }\n  \n  getRandom() {\n    this.dataService.getRandomSongs().subscribe(songs => this.songs = songs);\n  }\n\n  rateSong(song: Song, currentRate: number) {\n    console.log(currentRate);\n    if(!this.ratedSongsList.find((v1) => v1.name == song.name)){\n      this.ratedSongsList.push({... song});\n      this.rateList.push(currentRate);\n    }\n  }\n\n  upRate(song: Song, curentRate: number) {\n    song.rate ++;\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}